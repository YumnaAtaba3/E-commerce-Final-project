import{a7 as v,E as B,r as C,u as F,a as R,j as e,B as c,c as $,aI as k,T as w,G as p,aK as m,aQ as A,aR as E,aS as I}from"./vendor-CdHw5nIJ.js";import{d as N,u as L}from"./index-lTt6Hc_U.js";import{F as T}from"./FilterSidebar-ClzW8COP.js";import{P as W}from"./index-DP7BM3CW.js";import{E as M}from"./index-BUne5pNC.js";const U=(r=8)=>{const f=v(),n=B(),l=new URLSearchParams(n.search),o=l.get("categorySlug")||l.get("category")||void 0,s=l.get("filter"),[d,x]=C.useState(1),{data:h=[],isLoading:y,isError:u,refetch:j}=N(d,r,o),g=C.useMemo(()=>{let i=h;return s==="discount"&&(i=i.filter(a=>a.discount)),i},[h,s]),b=Math.ceil((g?.length||0)/r),S=(i,a)=>{x(a),window.scrollTo({top:0,behavior:"smooth"})},t=i=>{const a=new URLSearchParams(n.search);i?a.set("categorySlug",i):a.delete("categorySlug"),s==="discount"&&a.set("filter","discount"),f(`/products?${a.toString()}`),x(1)},P=s==="discount"&&o?`Discounted ${o.charAt(0).toUpperCase()+o.slice(1)}`:s==="discount"?"Discounted Products":o?o.charAt(0).toUpperCase()+o.slice(1):"All Products";return{products:g,isLoading:y,isError:u,refetch:j,page:d,pageCount:b,handlePageChange:S,handleCategorySelect:t,pageTitle:P}},_=()=>{const{theme:r}=L(),f=F(),n=R(f.breakpoints.down("sm")),[l,o]=C.useState(!1),{products:s,isLoading:d,isError:x,refetch:h,page:y,pageCount:u,handlePageChange:j,handleCategorySelect:g,pageTitle:b}=U(),S=Array.from({length:8},(t,P)=>P);return e.jsxs(c,{sx:{display:"flex",px:{xs:2,md:4},py:6,bgcolor:r.primary1},children:[!n&&e.jsx(c,{sx:{width:250,mr:3},children:e.jsx(T,{onCategorySelect:g})}),e.jsxs(c,{sx:{flex:1,maxWidth:1200,mx:"auto"},children:[n&&e.jsx(T,{onCategorySelect:g,open:l,setOpen:o}),e.jsxs(c,{display:"flex",alignItems:"center",mb:4,children:[e.jsx($,{onClick:()=>window.history.back(),sx:{ml:6,mr:2,bgcolor:r.primary1,color:r.Text1,"&:hover":{bgcolor:r.Button2}},children:e.jsx(k,{})}),e.jsx(w,{variant:n?"h6":"h5",sx:{fontWeight:700,color:r.Text1},children:b})]}),d&&e.jsx(p,{container:!0,spacing:6,justifyContent:"center",children:S.map(t=>e.jsx(p,{children:e.jsxs(c,{sx:{width:200,bgcolor:"background.paper",borderRadius:2,p:1,boxShadow:"0px 2px 10px rgba(0,0,0,0.05)"},children:[e.jsx(m,{variant:"rectangular",height:140,sx:{borderRadius:1}}),e.jsx(m,{variant:"text",width:"80%",height:25,sx:{mt:1}}),e.jsx(m,{variant:"text",width:"50%",height:20}),e.jsx(m,{variant:"text",width:"60%",height:20})]})},t))}),x&&e.jsx(M,{title:"Failed to load products",description:"Try again.",onRetry:h}),!d&&!x&&e.jsxs(e.Fragment,{children:[s.length===0?e.jsxs(c,{sx:{textAlign:"center",mt:6,p:4,borderRadius:4,bgcolor:r.primary1},children:[e.jsx(A,{sx:{fontSize:60,color:r.Button2,mb:2}}),e.jsx(w,{variant:"h6",sx:{fontWeight:600,color:r.Text1,mb:1},children:"No Products Found"}),e.jsx(w,{sx:{color:r.Text2,fontSize:14},children:"Try adjusting your filters or selecting another category."})]}):e.jsx(p,{container:!0,spacing:3,justifyContent:"center",children:s.map(t=>e.jsx(p,{sx:{display:"flex",justifyContent:"center"},children:e.jsx(W,{id:t.id,name:t.title,price:`$${Number(t.price).toFixed(2)}`,oldPrice:t.oldPrice!==void 0?`$${Number(t.oldPrice).toFixed(2)}`:void 0,discount:t.discount,rating:t.rating,img:t.images[0],isNew:t.isNew})},t.id))}),u>0&&e.jsx(c,{display:"flex",justifyContent:"center",mt:6,sx:{flexWrap:"wrap",gap:1},children:e.jsx(E,{count:u,page:y,onChange:j,renderItem:t=>e.jsx(I,{...t,sx:{fontSize:n?16:20,fontWeight:500,color:t.selected?"white":r.Text1,borderRadius:1,px:2,py:1,border:"1px solid",borderColor:t.selected?r.Button2:r.Text1,bgcolor:t.selected?`${r.Button2} !important`:"transparent",transition:"all 0.3s","&:hover":{bgcolor:r.Button2,color:"white",borderColor:r.Button2}}})})})]})]})]})};export{_ as default};
