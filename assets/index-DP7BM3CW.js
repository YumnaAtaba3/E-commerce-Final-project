import{a7 as H,b0 as V,r as q,j as t,a8 as J,B as s,c as B,a5 as $,H as G,a6 as K,a9 as L,q as Q,J as U,s as X,m as Y,ab as Z,T as p,ac as R}from"./vendor-CdHw5nIJ.js";import{u as _,j as v,c as T,b as tt}from"./index-lTt6Hc_U.js";const it=({id:a,name:m,price:g,oldPrice:W,discount:c,rating:r,img:y,isNew:f,colors:d})=>{const{theme:o}=_(),A=H(),{cartRef:O}=V(),P=v(e=>e.addToWishlist),F=v(e=>e.removeFromWishlist),u=v(e=>e.isInWishlist(a)),k=T(e=>e.addToCart),b=T(e=>e.isInCart(a)),[D,C]=q.useState([]),h=typeof g=="number"?g:parseFloat(`${g}`.replace(/[^0-9.]/g,""))||0;let I=h,x=W;if(c){const e=parseInt(c.replace(/[^0-9]/g,""));isNaN(e)||(x=`$${h.toFixed(2)}`,I=h*(1-e/100))}const z=`$${I.toFixed(2)}`,S=x&&x!==z?x:void 0,j=Array.isArray(y)?y[0]:y,E=()=>{if(u?F(a):P({id:a,title:m,price:h,oldPrice:x,discount:c,images:[j],rating:r,colors:d,isNew:f}),!u){const e=Array.from({length:30}).map(()=>({id:Date.now()+Math.random(),x:Math.random()*400-60,delay:Math.random()*.3}));C(n=>[...n,...e])}},M=()=>{if(!b){k({id:a,title:m,price:h,oldPrice:x,discount:c,images:[j],rating:r,colors:d,isNew:f},1);const e=O?.current?.cartIcon,n=document.getElementById(`product-img-${a}`);if(e&&n){const l=n.getBoundingClientRect(),w=e.getBoundingClientRect(),i=n.cloneNode(!0);i.style.position="fixed",i.style.left=`${l.left}px`,i.style.top=`${l.top}px`,i.style.width=`${l.width}px`,i.style.height=`${l.height}px`,i.style.zIndex="1000",i.style.pointerEvents="none",i.style.borderRadius="8px",document.body.appendChild(i),i.animate([{transform:"translate(0, 0) scale(1)"},{transform:`translate(${w.left-l.left}px, ${w.top-l.top}px) scale(0.2)`,opacity:.5}],{duration:800,easing:"ease-in-out"}).onfinish=()=>i.remove()}}},N=()=>A(tt.products.details(a));return t.jsxs(J,{sx:{width:280,height:350,borderRadius:2,overflow:"hidden",position:"relative","&:hover .hoverOverlay":{opacity:1,bottom:0},bgcolor:o.primary1,mt:5},children:[(c||f)&&t.jsxs(s,{sx:{position:"absolute",top:15,left:15,display:"flex",flexDirection:"column",gap:1,zIndex:2},children:[c&&t.jsx(s,{sx:{bgcolor:o.Button2,color:"#fff",px:1.2,py:.3,borderRadius:1,fontSize:14},children:c}),f&&t.jsx(s,{sx:{bgcolor:o.Button1,color:"#fff",px:1.2,py:.3,borderRadius:1,fontSize:14},children:"New"})]}),t.jsxs(s,{sx:{position:"absolute",top:10,right:10,display:"flex",flexDirection:"column",gap:1,zIndex:2},children:[t.jsx(B,{onClick:E,sx:{bgcolor:"white","&:hover":{bgcolor:o.Button2,color:"white"},width:42,height:42,color:u?o.Button2:"black"},children:u?t.jsx($,{fontSize:"medium"}):t.jsx(G,{fontSize:"medium"})}),t.jsx(B,{onClick:N,sx:{bgcolor:"white","&:hover":{bgcolor:o.Button2,color:"white"},width:42,height:42},children:t.jsx(K,{fontSize:"medium"})})]}),t.jsxs(s,{sx:{bgcolor:"#f5f5f5",p:2,textAlign:"center",position:"relative"},children:[t.jsx(L,{id:`product-img-${a}`,component:"img",height:"180",image:j,alt:m,sx:{objectFit:"contain",mx:"auto"}}),t.jsx(s,{className:"hoverOverlay",sx:{position:"absolute",bottom:"-100%",left:0,width:"100%",bgcolor:"black",color:"#fff",py:1,textAlign:"center",transition:"all 0.3s ease"},children:t.jsx(Q,{fullWidth:!0,sx:{bgcolor:b?"gray":"black",color:"white",fontSize:16,fontWeight:500},startIcon:t.jsx(U,{}),onClick:M,children:b?"In Cart":"Add To Cart"})}),t.jsx(X,{children:D.map(e=>t.jsx(Y.div,{initial:{opacity:1,scale:1,y:0,x:e.x},animate:{opacity:0,scale:1.5,y:-150},transition:{duration:1.2,ease:"easeOut",delay:e.delay},style:{position:"absolute",bottom:50,left:"50%",pointerEvents:"none"},onAnimationComplete:()=>C(n=>n.filter(l=>l.id!==e.id)),children:t.jsx($,{sx:{color:o.Button2,fontSize:28}})},e.id))})]}),t.jsxs(Z,{sx:{bgcolor:o.primary1,color:o.Text1,textAlign:"left"},children:[t.jsx(p,{sx:{fontSize:16,fontWeight:600,mb:1},noWrap:!0,children:m}),t.jsxs(s,{display:"flex",alignItems:"center",gap:1,mb:1,children:[t.jsx(p,{sx:{fontSize:16,color:o.Button2,fontWeight:600},children:z}),S&&t.jsx(p,{sx:{fontSize:14,color:"gray",textDecoration:"line-through"},children:S}),d&&r!==void 0&&t.jsxs(s,{display:"flex",alignItems:"center",gap:.5,ml:"auto",children:[t.jsx(R,{value:r,precision:.5,readOnly:!0,size:"small"}),t.jsxs(p,{sx:{fontSize:14,color:"gray"},children:["(",r,")"]})]})]}),!d&&r!==void 0&&t.jsxs(s,{display:"flex",alignItems:"center",gap:.5,mb:1,children:[t.jsx(R,{value:r,precision:.5,readOnly:!0,size:"small"}),t.jsxs(p,{sx:{fontSize:14,color:"gray"},children:["(",r,")"]})]}),d&&d.length>0&&t.jsx(s,{sx:{display:"flex",gap:1,mt:1},children:d.map((e,n)=>t.jsx(s,{sx:{width:18,height:18,borderRadius:"50%",bgcolor:e,cursor:"pointer",border:`1px solid ${o.Text1}`}},n))})]})]})};export{it as P};
