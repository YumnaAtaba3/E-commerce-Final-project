import{j as e,ap as k,B as s,c as w,aq as W,T as r,ar as L,X as F,a7 as $,E as R,m as c,q as j,g as f,as as A,y as T,b as D,u as q,a as P,r as V,at as N,L as Q}from"./vendor-CdHw5nIJ.js";import{u as y,a as E,b as m,c as g}from"./index-lTt6Hc_U.js";import{u as H}from"./useCoupon-D5cgzZZk.js";const M=({gridCols:t,isMobile:n,theme:o})=>e.jsxs(k,{sx:{mb:3,px:4,py:1.5,overflowX:"hidden",width:"100%",minWidth:n?500:700,mx:"auto",display:"grid",gridTemplateColumns:t,alignItems:"center",justifyItems:"center",bgcolor:o.primary1,color:o.Text1,gap:18,fontSize:16,border:"1px solid #e0e0e0",boxShadow:"0px 2px 6px rgba(0,0,0,0.05)"},children:[e.jsx(s,{justifySelf:"start",children:"Product"}),e.jsx(s,{children:"Price"}),e.jsx(s,{children:"Quantity"}),e.jsx(s,{children:"Subtotal"})]}),U=({item:t,onRemove:n,onQtyChange:o,theme:i,isMobile:a})=>{const l=()=>e.jsxs(s,{sx:{display:"flex",alignItems:"center",border:"1px solid #ccc",borderRadius:1,overflow:"hidden",width:60,height:30,bgcolor:i.primary1,color:i.Text1},children:[e.jsx(s,{sx:{flex:1,textAlign:"center",fontSize:16,lineHeight:"30px",userSelect:"none"},children:t.quantity}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",borderLeft:"1px solid #ccc"},children:[e.jsx(w,{size:"small",onClick:()=>o(t.id,t.quantity+1),sx:{padding:0,height:"50%",color:i.Text1},children:e.jsx(L,{fontSize:"small"})}),e.jsx(w,{size:"small",onClick:()=>o(t.id,Math.max(1,t.quantity-1)),sx:{padding:0,height:"50%",color:i.Text1},children:e.jsx(F,{fontSize:"small"})})]})]}),x=t.images[0]||"";return e.jsx(k,{sx:{mb:2,width:"100%",p:{xs:2,md:1},display:"grid",gridTemplateColumns:a?"1fr":"1.5fr 1fr 1fr 1.5fr",alignItems:"center",gap:2,border:`1px solid ${i.borderColor}`,borderRadius:2,boxShadow:"0px 6px 24px rgba(0,0,0,0.08)",transition:"all 0.3s",position:"relative","&:hover":{boxShadow:`0px 8px 30px ${i.Button2}50`,transform:"translateY(-4px)"},"&:hover .cancel":{opacity:1},bgcolor:i.primary1,color:i.Text1},children:a?e.jsx(e.Fragment,{children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5,border:`1px solid ${i.borderColor}`,borderRadius:2,p:2,transition:"all 0.3s",boxShadow:"0px 4px 12px rgba(0,0,0,0.08)"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(s,{component:"img",src:x,alt:t.title,sx:{width:60,height:60,objectFit:"cover",borderRadius:1,boxShadow:"0px 4px 12px rgba(0,0,0,0.15)"}}),e.jsx(r,{sx:{fontSize:16,fontWeight:500},children:t.title})]}),e.jsxs(r,{sx:{fontSize:14},children:["Price: $",t.price]}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(r,{sx:{fontSize:14},children:"Quantity:"}),e.jsx(l,{})]}),e.jsxs(r,{sx:{fontSize:14},children:["Subtotal: $",t.price*t.quantity]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2,justifySelf:"start"},children:[e.jsxs(s,{sx:{width:70,height:70,position:"relative"},children:[e.jsx(s,{component:"img",src:x,alt:t.title,sx:{width:"100%",height:"100%",objectFit:"cover",borderRadius:1,boxShadow:"0px 4px 12px rgba(0,0,0,0.15)"}}),e.jsx(w,{className:"cancel",onClick:()=>n(t.id),sx:{position:"absolute",top:-10,left:-10,bgcolor:"#fff",color:"error.main",opacity:0,transition:"opacity 0.3s","&:hover":{bgcolor:"#fff"}},children:e.jsx(W,{fontSize:"small"})})]}),e.jsx(r,{sx:{fontSize:16,fontWeight:500},children:t.title})]}),e.jsxs(r,{sx:{fontSize:16,justifySelf:"center"},children:["$",t.price]}),e.jsx(s,{sx:{justifySelf:"center"},children:e.jsx(l,{})}),e.jsxs(r,{sx:{fontSize:16,justifySelf:"center"},children:["$",t.price*t.quantity]})]})})},Y=({subtotal:t,discount:n,isMobile:o})=>{const{theme:i}=y(),a=$(),l=R(),{isLoggedIn:x,isLoading:h}=E(),u=t>0&&t<50?5:0,b=u===0?"Free":`$${u.toFixed(2)}`,C=t*(1-n/100)+u,v=()=>{if(!h){if(!x){T.warning("You must log in first!",{className:"toast-warning",autoClose:1500}),a(m.auth.signUp,{state:{from:l}});return}a(m.checkout)}},p=d=>({hidden:{opacity:0,x:30},visible:{opacity:1,x:0,transition:{delay:d,duration:.6,ease:f}}}),S=c(j);return e.jsxs(s,{sx:{color:i.Text1,border:`1px solid ${i.Text1}`,p:{xs:2,md:4},borderRadius:2,boxShadow:"0px 6px 24px rgba(0,0,0,0.08)",width:"100%",minWidth:o?{xs:"100%",md:100}:{xs:"100%",md:150},overflow:"hidden"},children:[e.jsxs(c.div,{initial:"hidden",animate:"visible",children:[e.jsx(c.div,{variants:p(.1),children:e.jsx(r,{sx:{fontSize:{xs:18,md:22},fontWeight:600,mb:1},children:"Cart Total"})}),e.jsx(c.div,{variants:p(.3),children:e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(r,{sx:{fontSize:{xs:14,md:16}},children:"Subtotal:"}),e.jsxs(r,{sx:{fontSize:{xs:14,md:16}},children:["$",t.toFixed(2)]})]})}),n>0&&e.jsx(c.div,{variants:p(.5),children:e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsxs(r,{sx:{fontSize:{xs:14,md:16}},children:["Discount (",n,"%):"]}),e.jsxs(r,{sx:{fontSize:{xs:14,md:16}},children:["-$",(t*(n/100)).toFixed(2)]})]})}),e.jsx(c.div,{variants:p(.7),children:e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[e.jsx(r,{sx:{fontSize:{xs:14,md:16}},children:"Shipping:"}),e.jsx(r,{sx:{fontSize:{xs:14,md:16}},children:b})]})}),e.jsxs(c.div,{variants:p(.9),children:[e.jsx(s,{sx:{borderTop:`1px solid ${i.borderColor}`,width:"100%",my:2}}),e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsx(r,{sx:{fontSize:{xs:16,md:18},fontWeight:500},children:"Total:"}),e.jsxs(r,{sx:{fontSize:{xs:16,md:18},fontWeight:500},children:["$",C.toFixed(2)]})]})]})]}),e.jsx(s,{textAlign:"center",children:e.jsx(S,{variant:"contained",onClick:v,sx:{width:{xs:180,md:220},mx:"auto",display:"block",bgcolor:i.Button2,color:"white",textTransform:"none",fontSize:{xs:14,md:16},py:{xs:1,md:1.5},px:.5,"&:hover":{bgcolor:i.Button2},borderRadius:1},animate:{scale:[1,1.08,1]},transition:{duration:1.2,repeat:1/0,ease:A},children:"Proceed to checkout"})})]})},O=({isMobile:t,setDiscountPercent:n})=>{const{theme:o}=y(),{couponCode:i,setCouponCode:a,isCouponApplied:l,handleApplyCoupon:x}=H(n);return e.jsxs(s,{sx:{display:"flex",gap:3,flexWrap:t?"wrap":"nowrap",pr:t?0:30,justifyContent:t?"center":"flex-start",mx:t?"auto":0,width:t?"70%":"auto",maxWidth:t?360:"none"},children:[e.jsx(D,{label:"Coupon Code",placeholder:"Enter Code",value:i,onChange:h=>a(h.target.value),disabled:l,variant:"outlined",sx:{flex:"1 1 auto",minWidth:{xs:"100%",sm:"260px"},maxWidth:{sm:300},"& input":{color:o.Text1,"&::placeholder":{color:o.Text1}},"& .MuiOutlinedInput-root":{height:50,"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:o.Button2},"&.Mui-focused fieldset":{borderColor:o.Button2}},"& .MuiInputLabel-root":{fontSize:"16px",color:o.borderColor,transition:"all 0.2s"},"&:hover .MuiInputLabel-root":{color:o.Button2},"& .MuiInputLabel-root.Mui-focused":{color:o.Button2},"&.Mui-disabled":{bgcolor:"gray",color:"white",opacity:1}}}),e.jsx(j,{onClick:x,variant:"contained",disabled:l,sx:{bgcolor:o.Button2,color:"white",textTransform:"none",fontSize:14,px:6,height:50,whiteSpace:"nowrap","&:hover":{bgcolor:o.Button2},"&.Mui-disabled":{bgcolor:"gray",color:"white",opacity:1}},children:l?"Applied":"Apply Coupon"})]})},B=({isMobile:t,returnToShop:n})=>{const{theme:o}=y(),i=g(l=>l.cart),a=()=>{if(i.length===0){T.info("Your cart is empty!",{className:"toast-info",autoClose:1200});return}T.success("Cart updated successfully!",{autoClose:1200,className:"toast-success"})};return e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mt:3,flexWrap:"wrap",gap:t?2:112},children:[e.jsx(j,{variant:"outlined",sx:{borderColor:o.borderColor,color:o.Text1,textTransform:"none",fontSize:t?12:14,px:3,"&:hover":{borderColor:o.Button2,color:o.Button2}},onClick:n,children:"Return To Shop"}),e.jsx(j,{variant:"outlined",sx:{borderColor:o.borderColor,color:o.Text1,textTransform:"none",fontSize:t?12:14,px:3,"&:hover":{borderColor:o.Button2,color:o.Button2}},onClick:a,children:"Update Cart"})]})},J=()=>{const{theme:t}=y(),n=q(),o=P(n.breakpoints.down("md")),i=$(),a=g(d=>d.cart),l=g(d=>d.removeFromCart),x=g(d=>d.updateQuantity),[h,z]=V.useState(0),u=a.reduce((d,I)=>d+I.price*I.quantity,0),b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.3}}},C={hidden:{y:-40,opacity:0},visible:{y:0,opacity:1,transition:{duration:.6,ease:f}}},v={hidden:{x:-80,opacity:0},visible:{x:0,opacity:1,transition:{duration:.5,ease:f}}},p={hidden:{x:-100,opacity:0},visible:{x:0,opacity:1,transition:{duration:.7,ease:f}}},S={hidden:{x:100,opacity:0},visible:{x:0,opacity:1,transition:{duration:.7,ease:f}}};return e.jsxs(s,{sx:{width:"100%",minHeight:"100vh",overflowX:"hidden",px:{xs:2,md:7},py:6,bgcolor:t.primary1,fontFamily:"'Inter', sans-serif",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs(N,{separator:"/","aria-label":"breadcrumb",sx:{color:t.Text1,width:"100%",justifyContent:"flex-start",mt:2,fontSize:14,ml:o?0:35},children:[e.jsx(Q,{underline:"hover",color:t.Text1,onClick:()=>i(m.home),sx:{cursor:"pointer",fontSize:14},children:"Home"}),e.jsx(r,{color:t.Text1,sx:{fontSize:14},children:"Cart"})]}),a.length===0?e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",mt:8,gap:3},children:[e.jsx(r,{sx:{color:t.Text1,fontSize:20,fontWeight:500},children:"Your cart is empty ðŸ›’"}),e.jsx(r,{sx:{fontSize:16,color:t.Text1,textAlign:"center"},children:"Browse our products and add items to your cart"}),e.jsx(B,{isMobile:o,returnToShop:()=>i(m.home)})]}):e.jsxs(c.div,{variants:b,initial:"hidden",animate:"visible",style:{width:"100%",maxWidth:1200,display:"flex",flexDirection:"column",alignItems:"center",gap:"16px",marginTop:"16px"},children:[!o&&e.jsx(c.div,{variants:C,style:{width:"100%"},children:e.jsx(M,{gridCols:"1.5fr 1fr 1fr 1.5fr",isMobile:o,theme:t})}),a.map(d=>e.jsx(c.div,{variants:v,style:{width:"100%"},children:e.jsx(U,{item:d,gridCols:o?"1fr":"1.5fr 1fr 1fr 1.5fr",onRemove:l,onQtyChange:x,theme:t,isMobile:o})},d.id)),e.jsx(B,{isMobile:o,returnToShop:()=>i(m.home)}),e.jsxs(s,{sx:{display:"flex",flexDirection:o?"column":"row",justifyContent:"center",alignItems:"flex-start",gap:2,width:"100%",mt:5},children:[e.jsx(c.div,{variants:p,style:{flex:1,width:"100%"},children:e.jsx(O,{isMobile:o,setDiscountPercent:z})}),e.jsx(c.div,{variants:S,style:{flex:1,width:"100%"},children:e.jsx(Y,{subtotal:u,discount:h,isMobile:o})})]})]})]})};export{J as default};
