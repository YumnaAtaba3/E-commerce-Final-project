import{j as e,T as t,B as n,au as O,ay as R,av as b,r as y,aw as V,ax as E,az as q,aA as L,aB as H,aC as G,b as Y,q as T,u as Q,a as X,m as v,aD as D,aE as _,aF as M,aG as $,i as J,l as K,n as U,a7 as Z,G as k,y as I}from"./vendor-CdHw5nIJ.js";import{u as C,c as B,b as ee}from"./index-lTt6Hc_U.js";import{u as te,a as F}from"./useCoupon-D5cgzZZk.js";const ne=()=>{const{theme:i}=C();return e.jsxs(t,{sx:{fontSize:"14px",color:i.secondaryText,mb:3},children:["Account / My Account / Product / View Cart /"," ",e.jsx(n,{component:"span",sx:{color:i.Text1,fontWeight:500},children:"Checkout"})]})},se=/^[0-9]{10,15}$/,oe=O().shape({firstName:b().required("First name is required").min(2,"First name must be at least 2 characters").max(50,"First name cannot exceed 50 characters"),companyName:b().optional().nullable(),streetAddress:b().required("Street address is required").min(5,"Street address must be at least 5 characters"),apartment:b().optional().nullable(),townCity:b().required("Town/City is required").min(2,"Town/City must be at least 2 characters"),phoneNumber:b().required("Phone number is required").matches(se,"Enter a valid phone number"),emailAddress:b().required("Email address is required").email("Enter a valid email address"),saveInfo:R().optional().nullable()}),ie=y.forwardRef((i,o)=>{const{theme:s}=C(),[c,r]=y.useState(null),{control:x,formState:{errors:u},getValues:h,trigger:f}=V({resolver:E(oe),defaultValues:{firstName:"",companyName:"",streetAddress:"",apartment:"",townCity:"",phoneNumber:"",emailAddress:"",saveInfo:!1},mode:"onChange"});y.useImperativeHandle(o,()=>({async submitForm(){return await f()?h():null}}));const p=[{name:"firstName",label:"First Name",required:!0},{name:"companyName",label:"Company Name"},{name:"streetAddress",label:"Street Address",required:!0},{name:"apartment",label:"Apartment, floor, etc. (optional)"},{name:"townCity",label:"Town/City",required:!0},{name:"phoneNumber",label:"Phone Number",required:!0},{name:"emailAddress",label:"Email Address",required:!0}];return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:5,p:{xs:1,md:2},pl:{xs:1,md:8}},children:[p.map((l,j)=>e.jsx(q,{name:l.name,control:x,render:({field:d})=>e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(t,{sx:{fontSize:"14px",fontFamily:"'Inter', sans-serif",color:c===j?s.Button2:s.Text1},children:[l.label,l.required&&e.jsx(n,{component:"span",sx:{color:"red",ml:.3},children:"*"})]}),e.jsx(L,{...d,fullWidth:!0,size:"small",onFocus:()=>r(j),onBlur:()=>r(null),error:!!u[l.name],sx:{fontSize:{xs:"14px",md:"16px"},fontFamily:"'Inter', sans-serif",bgcolor:s.bgColor,color:s.Text1,width:{xs:"100%",md:"400px"},height:{xs:40,md:50},"& .MuiOutlinedInput-notchedOutline":{border:"1px solid transparent"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:`1px solid ${s.Button2}`},"& input:-webkit-autofill":{WebkitBoxShadow:`0 0 0 1000px ${s.primary1} inset`,WebkitTextFillColor:s.Text1,transition:"background-color 5000s ease-in-out 0s"}}}),u[l.name]&&e.jsx(H,{error:!0,sx:{mt:-1},children:u[l.name]?.message})]})},l.name)),e.jsx(q,{name:"saveInfo",control:x,render:({field:l})=>e.jsxs(n,{sx:{display:"flex",alignItems:"center",mt:2},children:[e.jsx(G,{...l,checked:l.value,sx:{color:s.Button2,"&.Mui-checked":{color:s.Button2},transform:"scale(1.3)"}}),e.jsx(t,{sx:{fontSize:"14px",cursor:"pointer",color:s.Text1},children:"Save this information for faster check-out next time"})]})})]})}),re=({name:i,price:o,image:s})=>e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5,gap:6,maxWidth:500,width:"100%"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(n,{component:"img",src:s,alt:i,sx:{height:40,width:40,objectFit:"contain"}}),e.jsx(t,{sx:{fontSize:13,lineHeight:1.2},children:i})]}),e.jsx(t,{sx:{fontSize:14,fontWeight:500},children:o})]}),ae=({isMobile:i,setDiscountPercent:o})=>{const{theme:s}=C(),{couponCode:c,setCouponCode:r,isCouponApplied:x,handleApplyCoupon:u}=te(o);return e.jsxs(n,{sx:{display:"flex",gap:2,flexWrap:i?"wrap":"nowrap",pr:i?0:30,justifyContent:i?"center":"flex-start",mx:i?"auto":0,width:i?"90%":"auto",maxWidth:i?360:"none"},children:[e.jsx(Y,{label:"Coupon Code",placeholder:"Enter Code",value:c,onChange:h=>r(h.target.value),disabled:x,variant:"outlined",sx:{flex:"1 1 auto",minWidth:{xs:"100%",sm:"360px"},maxWidth:{sm:300},"& input":{color:s.Text1,"&::placeholder":{color:s.Text1}},"& .MuiOutlinedInput-root":{height:50,"& fieldset":{borderColor:"gray"},"&:hover fieldset":{borderColor:s.Button2},"&.Mui-focused fieldset":{borderColor:s.Button2}},"& .MuiInputLabel-root":{fontSize:"16px",color:s.borderColor,transition:"all 0.2s"},"&:hover .MuiInputLabel-root":{color:s.Button2},"& .MuiInputLabel-root.Mui-focused":{color:s.Button2},"&.Mui-disabled":{bgcolor:"gray",color:"white",opacity:1}}}),e.jsx(T,{onClick:u,variant:"contained",disabled:x,sx:{bgcolor:s.Button2,color:"white",textTransform:"none",fontSize:14,px:6,height:50,whiteSpace:"nowrap","&:hover":{bgcolor:s.Button2},"&.Mui-disabled":{bgcolor:"gray",color:"white",opacity:1}},children:x?"Applied":"Apply Coupon"})]})},le="/e-commerce-final-project/assets/masterCard-qSarHFv6.svg",ce="/e-commerce-final-project/assets/chinalogo-CMMePW1M.svg",de="/e-commerce-final-project/assets/Bkash-DcXFQOik.svg",xe="/e-commerce-final-project/assets/Visa-DiBz_Bsm.svg",ue=({onPlaceOrder:i})=>{const{theme:o}=C(),s=Q(),c=X(s.breakpoints.down("md")),r=B(a=>a.cart),x=B(a=>a.clearCart),u=F(a=>a.clearCoupon),h=r.reduce((a,z)=>a+z.price*(z.quantity||1),0),f=h>0?20:0,p=h+f,[l,j]=y.useState("bank"),[d,m]=y.useState(F.getState().discountPercent||0),g=p-p*d/100,S=a=>{i(a),x(),u(),m(0)},w=v(T);return e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:3.5,width:"100%"},children:[e.jsx(n,{sx:{p:1.5,borderRadius:2,bgcolor:o.primary1,width:"100%",maxWidth:500,maxHeight:200,overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:o.Button2,borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"transparent"}},children:r.length>0?r.map(a=>e.jsx(re,{name:a.title,price:`$${(a.price*(a.quantity||1)).toFixed(2)}`,image:a.images?.[0]||"/placeholder.png"},a.id)):e.jsx(t,{sx:{fontSize:16,color:o.Text1},children:"Your cart is empty ðŸ›’"})}),e.jsxs(n,{sx:{p:1.5,borderRadius:2,bgcolor:o.primary1,display:"flex",flexDirection:"column",gap:1.5,width:"100%",maxWidth:500},children:[e.jsxs(n,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{sx:{fontSize:15},children:"Subtotal"}),e.jsxs(t,{sx:{fontSize:15,fontWeight:500},children:["$",h.toFixed(2)]})]}),e.jsx(D,{sx:{borderColor:o.borderColor,my:.5}}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{sx:{fontSize:15},children:"Shipping"}),e.jsx(t,{sx:{fontSize:15,fontWeight:500},children:f===0?"Free":`$${f.toFixed(2)}`})]}),e.jsx(D,{sx:{borderColor:o.borderColor,my:.5}}),d>0&&e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontSize:15},children:[e.jsxs(t,{children:["Discount (",d,"%)"]}),e.jsxs(t,{children:["-$",(p*d/100).toFixed(2)]})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontWeight:600,mt:1},children:[e.jsx(t,{sx:{fontSize:15},children:"Total"}),e.jsxs(t,{sx:{fontSize:15},children:["$",g.toFixed(2)]})]})]}),e.jsxs(_,{value:l,onChange:a=>j(a.target.value),sx:{display:"flex",flexDirection:"column",gap:1,mt:1.5},children:[e.jsx(M,{value:"bank",control:e.jsx($,{sx:{color:o.Text1,"&.Mui-checked":{color:o.Text1}}}),label:e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:c?12:28},children:[e.jsx(t,{sx:{fontSize:15,flex:1},children:"Bank"}),e.jsxs(n,{sx:{display:"flex",gap:.5},children:[e.jsx(n,{component:"img",src:de,alt:"Bkash",sx:{height:22}}),e.jsx(n,{component:"img",src:xe,alt:"Visa",sx:{height:22}}),e.jsx(n,{component:"img",src:ce,alt:"China",sx:{height:22}}),e.jsx(n,{component:"img",src:le,alt:"MasterCard",sx:{height:22}})]})]})}),e.jsx(M,{value:"cod",control:e.jsx($,{sx:{color:o.Text1,"&.Mui-checked":{color:o.Text1}}}),label:e.jsx(t,{sx:{fontSize:15},children:"Cash on delivery"})})]})]}),e.jsx(ae,{isMobile:c,setDiscountPercent:m}),e.jsx(w,{variant:"contained",sx:{width:190,height:48,bgcolor:o.Button2,color:"#fff",fontSize:"14px",fontWeight:500,textTransform:"none",alignSelf:"flex-start","&:hover":{bgcolor:o.error}},onClick:()=>S(l),animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:"Place Order"})]})},he=v(U),W=v(n),pe=({open:i,onClose:o,invoice:s})=>{const{theme:c}=C();if(!s)return null;const{billingData:r,cartItems:x,subtotal:u,shipping:h,total:f,discountPercent:p,paymentMethod:l,date:j}=s,d=()=>window.print();return e.jsxs(J,{open:i,onClose:o,maxWidth:"md",fullWidth:!0,children:[e.jsxs(K,{sx:{textAlign:"center",fontWeight:700},children:[e.jsx(t,{variant:"h6",sx:{mb:.5,fontSize:14},children:"Company Name"}),e.jsx(t,{variant:"subtitle2",color:"text.secondary",sx:{fontSize:12},children:"Invoice"})]}),e.jsxs(he,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5,ease:"easeOut"},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",mb:2,flexWrap:"wrap",gap:2},children:[e.jsxs(n,{sx:{minWidth:250},children:[e.jsx(t,{sx:{fontWeight:600,mb:.5,fontSize:14},children:"Billing Information"}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Name:"})," ",r.firstName," ",r.lastName]}),r.companyName&&e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Company:"})," ",r.companyName]}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Address:"})," ",r.streetAddress,","," ",r.apartment]}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"City:"})," ",r.townCity]}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Email:"})," ",r.emailAddress]}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Phone:"})," ",r.phoneNumber]})]}),e.jsxs(n,{sx:{minWidth:200},children:[e.jsx(t,{sx:{fontWeight:600,mb:.5,fontSize:14},children:"Payment Information"}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Method:"})," ",l]}),e.jsxs(t,{sx:{fontSize:12},children:[e.jsx("strong",{children:"Date:"})," ",new Date(j).toLocaleString()]})]})]}),e.jsx(D,{sx:{mb:2}}),e.jsxs(n,{sx:{overflowX:"auto"},children:[e.jsxs(n,{sx:{display:"grid",gridTemplateColumns:"4fr 1fr",fontWeight:600,borderBottom:`2px solid ${c.borderColor}`,py:.5,fontSize:14},children:[e.jsx(t,{children:"Product"}),e.jsx(t,{align:"right",children:"Price"})]}),x.map((m,g)=>e.jsxs(W,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:g*.05},sx:{display:"grid",gridTemplateColumns:"4fr 1fr",py:.5,borderBottom:g===x.length-1?"2px solid #000":`1px solid ${c.borderColor}`,fontSize:12},children:[e.jsxs(t,{children:[m.title," x ",m.quantity||1]}),e.jsxs(t,{align:"right",children:["$",(m.price*(m.quantity||1)).toFixed(2)]})]},g))]}),e.jsxs(W,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},sx:{mt:2,display:"flex",flexDirection:"column",gap:.5},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontSize:12},children:[e.jsx(t,{children:"Subtotal"}),e.jsxs(t,{children:["$",u.toFixed(2)]})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontSize:12},children:[e.jsx(t,{children:"Shipping"}),e.jsx(t,{children:h===0?"Free":`$${h.toFixed(2)}`})]}),p>0&&e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontSize:12},children:[e.jsxs(t,{children:["Discount (",p,"%)"]}),e.jsxs(t,{children:["-$",((u+h)*p/100).toFixed(2)]})]}),e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",fontWeight:700,fontSize:14,backgroundColor:c.Button2+"20",px:1,py:.5,borderRadius:1},children:[e.jsx(t,{children:"Total"}),e.jsxs(t,{children:["$",f.toFixed(2)]})]})]}),e.jsxs(W,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},sx:{display:"flex",justifyContent:"center",gap:1.5,mt:3,flexWrap:"wrap"},children:[e.jsx(T,{variant:"contained",sx:{bgcolor:c.Button2,color:"#fff",fontWeight:600,textTransform:"none","&:hover":{bgcolor:c.Button2},px:4,py:1,fontSize:12},onClick:o,children:"Close"}),e.jsx(T,{variant:"outlined",sx:{color:c.Text1,borderColor:c.Text1,fontWeight:600,textTransform:"none",px:4,py:1,fontSize:12,"&:hover":{borderColor:c.Text1,bgcolor:"#f5f5f5"}},onClick:d,children:"Print"})]})]})]})},ge=()=>{const{theme:i}=C(),o=Z(),s=B(d=>d.cart),c=B(d=>d.clearCart),r=y.useRef(null),[x,u]=y.useState(!1),[h,f]=y.useState(null),p=async d=>{const m=await r.current?.submitForm();if(!m){I.error("Please fill all required fields correctly!",{className:"toast-error",autoClose:2e3});return}if(s.length===0){I.error("Your cart is empty!",{autoClose:2e3});return}const g=F.getState().discountPercent||0,S=s.reduce((N,P)=>N+P.price*(P.quantity||1),0),w=S>0?20:0,a=S+w,z=a-a*g/100,A={billingData:m,cartItems:s,subtotal:S,shipping:w,total:z,discountPercent:g,paymentMethod:d,date:new Date().toISOString()};f(A),u(!0),F.getState().clearCoupon(),c(),I.success("Order placed successfully!",{autoClose:2e3})},l={hidden:{opacity:0,x:-50},visible:{opacity:1,x:0,transition:{duration:.6}}},j={hidden:{opacity:0,x:50},visible:{opacity:1,x:0,transition:{duration:.6,delay:.3}}};return e.jsxs(n,{sx:{width:"100%",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",px:{xs:2,md:4},py:6,fontFamily:"'Inter', sans-serif",color:i.Text1,bgcolor:i.primary1},children:[e.jsxs(n,{sx:{width:"100%",maxWidth:"auto",pl:{xs:1,md:6}},children:[e.jsx(ne,{}),e.jsx(t,{sx:{fontSize:{xs:"24px",md:"32px"},fontWeight:500,mb:4,color:i.Text1,textAlign:"start",pl:{xs:1,md:8}},children:"Billing Details"}),e.jsxs(k,{container:!0,spacing:{xs:6,md:15},justifyContent:"start",children:[e.jsx(k,{children:e.jsx(v.div,{variants:l,initial:"hidden",animate:"visible",children:e.jsx(ie,{ref:r})})}),e.jsx(k,{children:e.jsx(v.div,{variants:j,initial:"hidden",animate:"visible",children:e.jsx(ue,{onPlaceOrder:p})})})]})]}),e.jsx(pe,{open:x,onClose:()=>{u(!1),o(ee.home)},invoice:h})]})};export{ge as default};
